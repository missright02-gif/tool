<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â∞çË©±Á∑¥Áøí - Central Park</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', 'Microsoft JhengHei', sans-serif;
            background-color: #f0f7ff;
            background-image: repeating-linear-gradient(
                45deg, 
                transparent, 
                transparent 25px, 
                rgba(0, 123, 255, 0.03) 25px, 
                rgba(0, 123, 255, 0.03) 26px
            );
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .dialogue-container {
            width: 95%;
            max-width: 800px;
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
        }

        .top-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .progress-info { 
            color: #1a5276; 
            font-weight: bold; 
            font-size: 1.3em; 
        }

        .dialogue-screen {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 40px;
        }

        .speech-bubble {
            padding: 30px;
            border-radius: 25px;
            position: relative;
            max-width: 90%;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            background: white;
            transition: all 0.3s ease;
        }

        .speech-bubble.left {
            align-self: flex-start;
            border-bottom-left-radius: 0;
            border-left: 10px solid #007bff;
        }

        .speech-bubble.right {
            align-self: flex-end;
            background: #e3f2fd;
            border-bottom-right-radius: 0;
            border-right: 10px solid #00c853;
        }

        .speaker-name {
            font-size: 1.1em;
            font-weight: bold;
            color: #546e7a;
            margin-bottom: 12px;
            display: block;
        }

        .text-en {
            font-size: 2em; /* Ëã±ÊñáË∂ÖÂ§ßÂ≠óÈ´î */
            color: #2c3e50;
            line-height: 1.3;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .text-zh {
            font-size: 1.5em; /* ‰∏≠ÊñáÂ§ßÂ≠óÈ´î */
            color: #607d8b;
            padding-top: 15px;
            border-top: 2px dashed #cfd8dc;
            margin-bottom: 20px;
        }

        .bubble-actions {
            display: flex;
            gap: 15px;
        }

        .action-btn {
            background: white;
            border: 2px solid #007bff;
            color: #007bff;
            border-radius: 12px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
        }

        .action-btn:hover {
            background: #007bff;
            color: white;
        }

        .navigation-controls {
            margin-top: 50px;
            display: flex;
            justify-content: space-between;
        }

        .nav-btn {
            padding: 15px 45px;
            border-radius: 50px;
            border: none;
            background: #90a4ae;
            color: white;
            font-weight: bold;
            font-size: 1.3em;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }

        .nav-btn.next {
            background: #007bff;
        }
    </style>
</head>
<body>

    <div class="dialogue-container">
        <div class="top-nav">
            <button style="border:none; background:none; cursor:pointer; color:#007bff; font-weight:bold; font-size:1.2em;" onclick="location.href='menu.html'">üè† ËøîÂõûÈÅ∏ÂñÆ</button>
            <div class="progress-info">È†ÅÊï∏Ôºö<span id="page-num">1</span> / <span id="total-pages"></span></div>
        </div>

        <div id="dialogue-screen" class="dialogue-screen"></div>

        <div class="navigation-controls">
            <button class="nav-btn" id="prevBtn" onclick="changePage(-1)">‰∏ä‰∏ÄÈ†Å</button>
            <button class="nav-btn next" id="nextBtn" onclick="changePage(1)">‰∏ã‰∏ÄÈ†Å</button>
        </div>
    </div>

    <script>
        const dialogues = [
          { speaker: "Maria", en: "Excuse me, sir. Could you help me?", zh: "ÊâìÊìæ‰∏Ä‰∏ãÂÖàÁîüÔºåÂèØ‰ª•Âπ´Êàë‰∏ÄÂÄãÂøôÂóéÔºü" },
          { speaker: "Henry", en: "I can try. What‚Äôs up?", zh: "ÊàëÂèØ‰ª•Ë©¶Ë©¶ÁúãÔºåÊÄéÈ∫º‰∫ÜÂóéÔºü" },
          { speaker: "Maria", en: "I want to go to Central Park. Do you know how to get there from here?", zh: "ÊàëË¶ÅÂéª‰∏≠Â§ÆÂÖ¨ÂúíÔºå‰Ω†Áü•ÈÅìÂæûÈÄôË£°ÊÄéÈ∫ºÂéªÂóéÔºü" },
          { speaker: "Henry", en: "Yes, I do, but it is pretty far away.", zh: "ÊàëÁü•ÈÅìÔºå‰∏çÈÅéÈÇ£Ë£°Èõ¢ÈÄôË£°ÊªøÈÅ†ÁöÑ„ÄÇ" },
          { speaker: "Maria", en: "Oh, really? Isn‚Äôt Central Park in Manhattan?", zh: "ÂñîÔºåÁúüÁöÑÂóéÔºü‰∏≠Â§ÆÂÖ¨Âúí‰∏çÊòØÂú®ÊõºÂìàÈ†ìÂóéÔºü" },
          { speaker: "Henry", en: "Yes, but we‚Äôre in Lower Manhattan now. Central Park is quite far from here.", zh: "Ê≤íÈåØÔºå‰∏çÈÅéÊàëÂÄëÁèæÂú®Âú®ÊõºÂìàÈ†ìÂçóÈÇäÔºå‰∏≠Â§ÆÂÖ¨ÂúíÈõ¢ÈÄôË£°ÈÇÑÊúâ‰∏ÄÊÆµË∑ùÈõ¢„ÄÇ" },
          { speaker: "Maria", en: "Oh, I see. How do I get there? Can I walk?", zh: "Âéü‰æÜÂ¶ÇÊ≠§„ÄÇÈÇ£ÊàëË¶ÅÊÄéÈ∫ºÂéªÔºüÂèØ‰ª•Áî®Ëµ∞ÁöÑÂóéÔºü" },
          { speaker: "Henry", en: "Well, you could, but it would take over an hour.", zh: "ÂóØÔºå‰Ω†ÂèØ‰ª•Ëµ∞Ë∑ØÂéªÔºå‰ΩÜÂ§ßÊ¶ÇË¶Å‰∏ÄÂÄãÂ§öÂ∞èÊôÇ„ÄÇ" },
          { speaker: "Maria", en: "Oh, no! I need to meet my friend there in 30 minutes. What should I do?", zh: "Á≥üÁ≥ïÔºÅÊàë‰∏âÂçÅÂàÜÈêòÂæåË¶ÅÂú®ÈÇ£Ë£°Ë∑üÊúãÂèãË¶ãÈù¢ÔºåÊÄéÈ∫ºËæ¶Ôºü" },
          { speaker: "Henry", en: "Don‚Äôt worry. You can take the subway.", zh: "Âà•ÊìîÂøÉÔºå‰Ω†ÂèØ‰ª•Êê≠Âú∞Èêµ„ÄÇ" },
          { speaker: "Maria", en: "I haven‚Äôt ridden the subway in New York yet. I‚Äôve heard it is very old.", zh: "ÊàëÈÇÑÊ≤íÂú®Á¥êÁ¥ÑÊê≠ÈÅéÂú∞ÈêµÔºåÊàëËÅΩË™™Âú∞ÈêµÂæàËÄÅËàä„ÄÇ" },
          { speaker: "Henry", en: "Yes, it is, and it‚Äôs not very clean. However, it will take you to Central Park.", zh: "ÊòØÂïäÔºåËªäÂ≠êÂæàËÄÅÔºåËÄå‰∏î‰πü‰∏çÊòØÂæà‰πæÊ∑®Ôºå‰∏çÈÅéÂèØ‰ª•Â∏∂‰Ω†Âà∞‰∏≠Â§ÆÂÖ¨Âúí„ÄÇ" },
          { speaker: "Maria", en: "OK. I‚Äôll try it. Where should I go?", zh: "Â•ΩÂêßÔºåÊàëË©¶Ë©¶Áúã„ÄÇÈÇ£ÊàëÊáâË©≤ÂæÄÂì™Ë£°Ëµ∞Ôºü" },
          { speaker: "Henry", en: "Walk down this street until you get to Chrystie Street. Then, turn left.", zh: "Ê≤øËëóÈÄôÊ¢ùË∑ØÁõ¥Ëµ∞ÔºåËµ∞Âà∞ Chrystie StreetÔºåÂÜçÂ∑¶ËΩâ„ÄÇ" },
          { speaker: "Maria", en: "OK, then what?", zh: "Â•ΩÔºå‰πãÂæåÂë¢Ôºü" },
          { speaker: "Henry", en: "Walk for about five minutes, until you see Grand Street Station. There, you will get on the subway train called the B Train.", zh: "ÂÜçËµ∞Â§ßÁ¥Ñ‰∫îÂàÜÈêòÔºå‰Ω†ÊúÉÁúãÂà∞ Grand Street ËªäÁ´ô„ÄÇÂú®ÈÇ£Ë£°Êê≠‰∏ÄÁè≠Âè´ÂÅö B Á∑öÁöÑÂú∞Èêµ„ÄÇ" },
          { speaker: "Maria", en: "Then what do I do?", zh: "‰πãÂæåÊàëË¶ÅÊÄéÈ∫ºÂÅöÔºü" },
          { speaker: "Henry", en: "You will ride the subway for eight stops. Get off at the 72nd Street Station.", zh: "Âú®Âú∞Èêµ‰∏äÂùêÂÖ´Á´ôÔºåÂú® 72 Ë°óËªäÁ´ô‰∏ãËªä„ÄÇ" },
          { speaker: "Maria", en: "And then I‚Äôll be at Central Park?", zh: "‰∏ãËªä‰πãÂæåÂ∞±Âà∞‰∏≠Â§ÆÂÖ¨Âúí‰∫ÜÂóéÔºü" },
          { speaker: "Henry", en: "Yes, when you come out of the subway station, you‚Äôll see the park. You can‚Äôt miss it!", zh: "Â∞çÔºåÂá∫‰∫ÜÂú∞ÈêµÁ´ô‰Ω†Â∞±ÊúÉÁúãÂà∞ÂÖ¨ÂúíÔºå‰∏ÄÂÆöÁúãÂæóÂà∞„ÄÇ" },
          { speaker: "Maria", en: "Thank you! You have been so helpful.", zh: "Â§™Ë¨ùË¨ù‰Ω†‰∫ÜÔºå‰Ω†Âπ´‰∫ÜÊàëÂæàÂ§ßÁöÑÂøô„ÄÇ" },
          { speaker: "Henry", en: "You‚Äôre welcome. Where will you meet your friend?", zh: "‰∏çÂÆ¢Ê∞£„ÄÇ‰Ω†Ë¶ÅÂú®Âì™Ë£°Ë∑üÊúãÂèãË¶ãÈù¢Ôºü" },
          { speaker: "Maria", en: "I will meet her at the lake in Central Park.", zh: "ÊàëË¶ÅÂú®‰∏≠Â§ÆÂÖ¨ÂúíË£°ÁöÑÊπñÈÇäË∑üÂ•πË¶ãÈù¢„ÄÇ" },
          { speaker: "Henry", en: "OK, perfect. That is very close to 72nd Street Station. You will see signs and a map when you get there.", zh: "ÈÇ£Â∞±ÂâõÂ•ΩÔºåÊπñÈõ¢ 72 Ë°óËªäÁ´ôÂæàËøëÔºå‰Ω†Âà∞ÈÇ£Ë£°ÊúÉÁúãÂà∞ÊåáÁ§∫ÁâåÂíåÂú∞Âúñ„ÄÇ" },
          { speaker: "Maria", en: "Thank you so much for these directions!", zh: "ÁúüÁöÑÈùûÂ∏∏ÊÑüË¨ù‰Ω†Âπ´ÊàëÊåáË∑ØÔºÅ" },
          { speaker: "Henry", en: "It‚Äôs nothing. Enjoy your visit to Central Park!", zh: "Â∞è‰∫ãÊÉÖËÄåÂ∑≤ÔºåÁ•ù‰Ω†Áé©ÂæóÈñãÂøÉÔºåÂ•ΩÂ•Ω‰∫´Âèó‰∏≠Â§ÆÂÖ¨Âúí„ÄÇ" }
        ];

        let currentPage = 0;
        const linesPerPage = 2;

        function renderPage() {
            const screen = document.getElementById('dialogue-screen');
            const totalPages = Math.ceil(dialogues.length / linesPerPage);
            screen.innerHTML = ''; 

            const start = currentPage * linesPerPage;
            const pageLines = dialogues.slice(start, start + linesPerPage);

            pageLines.forEach((item, index) => {
                const isMaria = item.speaker === "Maria";
                const bubble = document.createElement('div');
                bubble.className = `speech-bubble ${isMaria ? "left" : "right"}`;
                
                const safeText = item.en.replace(/'/g, "\\'");

                bubble.innerHTML = `
                    <span class="speaker-name">${item.speaker}</span>
                    <div class="text-en">${item.en}</div>
                    <div class="text-zh" id="zh-${index}" style="display:none;">${item.zh}</div>
                    <div class="bubble-actions">
                        <button class="action-btn" onclick="speakText('${safeText}')">üîä ÁôºÈü≥</button>
                        <button class="action-btn" onclick="toggleTranslation(${index})">Êñá ÁøªË≠Ø</button>
                    </div>
                `;
                screen.appendChild(bubble);
            });

            document.getElementById('page-num').innerText = currentPage + 1;
            document.getElementById('total-pages').innerText = totalPages;
            document.getElementById('prevBtn').style.visibility = currentPage === 0 ? "hidden" : "visible";
            document.getElementById('nextBtn').innerText = (currentPage === totalPages - 1) ? "ÂÆåÊàêÁ∑¥Áøí" : "‰∏ã‰∏ÄÈ†Å";
        }

        function changePage(step) {
            const totalPages = Math.ceil(dialogues.length / linesPerPage);
            if (currentPage + step >= 0 && currentPage + step < totalPages) {
                currentPage += step;
                renderPage();
                window.scrollTo(0,0);
            } else if (currentPage + step === totalPages) {
                alert("ÊÅ≠ÂñúÔºÅÊÇ®Â∑≤ËÆÄÂÆåÈÄôÊÆµ‰∏≠Â§ÆÂÖ¨ÂúíÂïèË∑ØÁöÑÂ∞çË©±„ÄÇ");
                location.href = 'learning-menu.html';
            }
        }

        function toggleTranslation(index) {
            const zhText = document.getElementById(`zh-${index}`);
            zhText.style.display = zhText.style.display === 'none' ? 'block' : 'none';
        }

        // ‰ΩøÁî®ÁÄèË¶ΩÂô®ÂÖßÂª∫ÂêàÊàêÁôºÈü≥
        function speakText(text) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = 'en-US';
            msg.rate = 0.9; // Ë™ûÈÄüÁ®çÂæÆÊîæÊÖ¢
            window.speechSynthesis.speak(msg);
        }

        renderPage();
    </script>
</body>
</html>
